{% extends "base.html" %}
{% block title %}Index{% endblock %}

{% block main %}
<h1>GoOutSafe</h1>

{% if current_user.is_authenticated and session['role'] == "user" %}
Hi {{ current_user.firstname }}!

<div class="ui divider"></div>

<div class="row">
    <h2 class="ui dividing header">Restaurants</h2>
    <div class="row">
        <a href="/restaurants" class="ui primary button">
            <i class="utensil spoon icon"></i>
            See restaurants list
        </a>
    </div><br />
</div>
<!-- {% for restaurant in restaurants %}
            <div>
                <li>
                    {{ restaurant.name }} -- Likes:{{ restaurant.likes }}
                </li>
            </div>
        {% endfor %} -->

{% elif current_user.is_authenticated and session['role'] == "operator" %}
Hi {{ current_user.firstname }}!
<div class="ui divider"></div>

<div class="row">
    <h2 class="ui dividing header">Restaurants</h2>
    <div class="row">
        <a href="/restaurants" class="ui primary button">
            <i class="utensil spoon icon"></i>
            See restaurants list
        </a>
    </div><br />

    {% elif current_user.is_authenticated and session['role'] == "authority" %}
    Hi {{ current_user.firstname }}!
    In the menu you have the button to mark users as positive.
</div>

{% else %}
<div class="row">
    <p>Hello Stranger! you can either <a href="/login/user">Log in</a> or <a href="/register/user">Sign Up</a></p>
    {{ session["role"] }}
</div>
{% endif %}

<div style="margin-top: 20px;" class="row">
    <a href="/restaurants_map" class="ui primary button">
        <i class="map icon"></i>
        Map of our restaurants
    </a>
</div>

<div style="margin-top: 30px;" class="row">
    <div class="ui four doubling stackable cards">
        {% for restaurant in restaurants %}
        <div class="ui link card" width="10%">
            {% if restaurant.path is defined %}
            <a href="{{ url_for('restaurants._restaurants') }}/{{ restaurant.id }}" class="image">
                <img src="/static/uploads/{{ restaurant.id }}/{{ restaurant.path }}">
            </a>
            {% else %}
            <a href="{{ url_for('restaurants._restaurants') }}/{{ restaurant.id }}" class="image">
                <img
                    src="https://www.repstatic.it/content/nazionale/img/2018/10/21/222802069-6316bf93-aa5e-4058-8f22-6bfd49e04202.jpg">
            </a>
            {% endif %}
            <div class="content">
                <div class="description">
                    <a href="{{ url_for('restaurants._restaurants') }}/{{ restaurant.id }} ">
                        {{ restaurant.name }}
                    </a>
                </div>
            </div>
            <div class="extra content">
                <span>
                    <i class="star icon"></i>
                    {{ restaurant.average_rating }}
                </span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>



{% endblock %}